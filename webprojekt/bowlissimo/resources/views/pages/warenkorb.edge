<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warenkorb</title>
    <link rel="stylesheet" href="/resources/css/app.css">
</head>
<body>
    <header class="header">
        @include('pages/partials/header')
    </header>
    
    <h1>Warenkorb</h1>
    
    <!-- Wenn der Warenkorb Produkte enthält -->
    @if (warenkorb.length > 0)
       <table>
          <thead>
            <tr>
                <th> Produkt</th>
                <th> Preis</th>
                <th> Anzahl</th>
                <th> Gesamt</th>
                <th>Aktionen</th>  <!--Entfernen-Formular korrekt zuzuordnen. -->

            </tr>
           </thead>
           <tbody>            
            @each (item in warenkorb)
              <tr>
                <td>{{ item.id }}</td>
                <td>{{ item.preis.toFixed(2) }} €</td>
                <td>{{ item.quantity }}</td>
                <td>{{ (item.preis * item.quantity).toFixed(2) }} €</td>
                <td>
              
                    <form action="/warenkorb/entfernen" method="POST" style="display: inline;"> 
                        <input type="hidden" name="id" value="{{ item.id }}"> 
                        <button type="submit">Entfernen</button>
                    </form>
                  </td> 
              </tr>
            @endeach

           </tbody>
        </table>
        <p><strong>Gesamtpreis:</strong> {{ totalPrice.toFixed(2) }} €</p>
        <a href="/bestellen">Zur Kasse</a>
    @else
        <p>Dein Warenkorb ist leer. <a href="/">Zurück zum Shop</a></p>
    @endif
</body>
</html>
